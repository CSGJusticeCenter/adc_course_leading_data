<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lesson 2: How Leaders Use Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../libs/clipboard/clipboard.min.js"></script>
<script src="../libs/quarto-html/quarto.js" type="module"></script>
<script src="../libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../libs/quarto-html/popper.min.js"></script>
<script src="../libs/quarto-html/tippy.umd.min.js"></script>
<script src="../libs/quarto-html/anchor.min.js"></script>
<link href="../libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../libs/bootstrap/bootstrap.min.js"></script>
<link href="../libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../libs/bootstrap/bootstrap-8de619bbd21ce238746bc3d87e490689.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link rel="preconnect" href="https://fonts.googleapis.com">

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">

<link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,100..900;1,100..900&amp;display=swap" rel="stylesheet">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#step-1-choose-what-to-measure" id="toc-step-1-choose-what-to-measure" class="nav-link" data-scroll-target="#step-1-choose-what-to-measure">Step 1: Choose what to measure</a></li>
  <li><a href="#step-2-define-how-to-measure-it" id="toc-step-2-define-how-to-measure-it" class="nav-link" data-scroll-target="#step-2-define-how-to-measure-it">Step 2: Define how to measure it</a></li>
  <li><a href="#step-3-put-your-kpi-to-work" id="toc-step-3-put-your-kpi-to-work" class="nav-link" data-scroll-target="#step-3-put-your-kpi-to-work">Step 3: Put your KPI to work</a></li>
  <li><a href="#step-4-scale-but-with-focus" id="toc-step-4-scale-but-with-focus" class="nav-link" data-scroll-target="#step-4-scale-but-with-focus">Step 4: Scale, but with focus</a></li>
  <li><a href="#real-world-kpis" id="toc-real-world-kpis" class="nav-link" data-scroll-target="#real-world-kpis">Real-world KPIs</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lesson 2: How Leaders Use Data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p><strong>What gets measured, gets managed.</strong> In corrections, nearly everything is measured—movements, medication distribution, visitations, and more. As such, correctional agencies generate an enormous amount of data, all of which must be logged and tracked.</p>
<p>But collecting data isn’t the same as using it. In many cases, data is recorded without being actively analyzed—and that makes sense. If corrections leaders tried to scrutinize every piece of information in their systems, they’d never get anything else done. Some data simply needs to exist for reference when needed.</p>
<p>But, when data is used <strong>intentionally</strong>, it becomes a powerful tool for driving public safety and positive change. We recommend looking at your system’s past key performance indicators (KPIs) and creating new ones that are in line with your goals for the department.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Good KPIs tell you…
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>If the system is producing the outcomes it’s supposed to acheive</li>
<li>If the new initiatives you’ve requested are being properly implemented</li>
<li>If the things you want to change are, in fact, changing</li>
</ol>
</div>
</div>
<p>Below, we outline four steps for generating and using KPIs to successfully manage your department.</p>
</section>
<section id="step-1-choose-what-to-measure" class="level2">
<h2 class="anchored" data-anchor-id="step-1-choose-what-to-measure">Step 1: Choose what to measure</h2>
<p>You have tons of data and a research team to help analyze it (see Lesson 4). The key question is: <strong>What matters most?</strong> What do you want to improve? Focus on the areas that will have the biggest impact.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example: Choosing a KPI
</div>
</div>
<div class="callout-body-container callout-body">
<p>Let’s say you want to improve access to education in your system. Your case management system keeps track of program enrollment and graduations. First, you must decide what to measure. Access to higher education resources through local universities? College completion? Or GED completion? It might be worth a (quick!) look at the evidence about what indicator might matter most for success after prison. And what you decide to measure is always going to be specific to your system and what you offer for educational programming.</p>
</div>
</div>
</section>
<section id="step-2-define-how-to-measure-it" class="level2">
<h2 class="anchored" data-anchor-id="step-2-define-how-to-measure-it">Step 2: Define how to measure it</h2>
<p>Bring in <strong>operational staff and your data team</strong> to figure out the best way to track progress. Is data about this KPI already being collected? If so, what is being actively measured right now? Is it the right approach? If not, what’s the best way to start? Setting the right KPIs involves trial and error. Have your data team <strong>test sample KPIs</strong> using last year’s data to see if they truly reflect what you want to know. Make sure leadership, managers, and frontline staff feel <strong>involved and empowered</strong>—KPIs should <strong>drive real change</strong>, not just sit on a dashboard.</p>
</section>
<section id="step-3-put-your-kpi-to-work" class="level2">
<h2 class="anchored" data-anchor-id="step-3-put-your-kpi-to-work">Step 3: Put your KPI to work</h2>
<p>Start tracking your KPI—internally at first. Ideally, use an internal dashboard or a regularly generated report to see if the system <strong>can move the metric</strong>. If it’s not working, refine it. If it’s too easy, set a more ambitious goal. Once you’re confident in its impact, consider <strong>publicly sharing and tracking</strong> it to drive transparency and accountability.</p>
</section>
<section id="step-4-scale-but-with-focus" class="level2">
<h2 class="anchored" data-anchor-id="step-4-scale-but-with-focus">Step 4: Scale, but with focus</h2>
<p>A system that lacks focus rarely ends up moving the needle. Corrections is a 24/7, 365-day operation with constant change, and sometimes almost everyday crises. Even though you’ll have to shift your attention to other pressing issues, keep your top three KPIs in mind and watch them. Have your staff pick their top three KPIs for their focus areas and track those. Improving the culture of performance management will help everyone do a better job, and keeping your goals specific will help you make the bigger changes you want to make.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example: Refining a KPI
</div>
</div>
<div class="callout-body-container callout-body">
<p>You decide to measure two things: enrollment and graduation in GED programs. Your KPI could be:</p>
<ol type="1">
<li>Increase the <strong>number</strong> of people in your custody in GED classes. And possibly</li>
<li>Increase the <strong>percentage</strong> of people in your custody in GED classes.</li>
</ol>
<p>The first one will help you get started and provide valuable operational data (i.e., do we need more classrooms, more chairs, more materials) as GED programming increases.</p>
<p>The second one will help you measure your initiative—increasing access to education. If a KPI on the percentage of people in GED class enrollment or graduations shows positive progress, you’ll know that access is increasing. However, it will require you to think through additional nuances. Are there some people who aren’t eligible for these programs? Should they be counted in the denominator when calculating the percentage? And is there an easy way for your team to figure that out?</p>
<p>Also, remember that systems get sidetracked by trying to find the “perfect” indicator. Don’t make that mistake!</p>
</div>
</div>
<p>Good KPIs follow the “SMART” principle of goal setting:</p>
<ul>
<li><strong>S</strong>pecific</li>
<li><strong>M</strong>easurable</li>
<li><strong>A</strong>chievable</li>
<li><strong>R</strong>elevant</li>
<li><strong>T</strong>ime-bound</li>
</ul>
<p>Going back to the example in the call-out boxes about GED completions, we see that the KPI still needs a few additions:</p>
<ol type="1">
<li>Specific number(s) you’re starting with (how many people currently enroll/graduate in GED classes, as well as how many people are eligible)</li>
<li>Time-boundedness (over what amount of time are you going to measure this?)</li>
<li>A specific goal value or number</li>
</ol>
<p>You might end up with:</p>
<p><strong>Over the course of 12 months, the DOC will increase the number of people currently enrolled in GED programs from 500 to 750.</strong></p>
<p>Or:</p>
<p><strong>Over the course of 12 months, the DOC will increase GED graduations from 40 (last fiscal year) to 60.</strong></p>
<p>Or:</p>
<p><strong>Over the course of 12 months, the DOC will increase the percentage of GED enrollments in the eligible population by 5 percentage points (last year, 25 percent of the eligible population were enrolled; this year, 30 percent of the eligible population will be enrolled).</strong></p>
</section>
<section id="real-world-kpis" class="level2">
<h2 class="anchored" data-anchor-id="real-world-kpis">Real-world KPIs</h2>
<p>CSG Justice Center staff reviewed the KPIs of all 50 state DOCs. We’ve included some real-world examples in the chart below and some KPIs that focus on new initiatives or areas of concern for some departments. In the past few years, states have typically focused on staffing, recidivism, and operational safety.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Subject Area</th>
<th>KPI</th>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Staffing</strong></td>
<td>1. The Correctional Office staffing level will be maintained at 85 percent or greater.<br>2. Security supervisor staffing level will be maintained at 85 percent or greater.<br>3. The annual CO turnover rate will be maintained at 15 percent or less.<br>4. Job satisfaction will be 70 percent or greater.</td>
<td><a href="pdf/ADOC%20Strategic%20Plan%202019.2022-public.pdf">ADOC Strategic Plan 2019-2022</a></td>
</tr>
<tr class="even">
<td><strong>Recidivism</strong></td>
<td>Decrease recidivism by 3 percent—adult recidivism from 40 percent to 37 percent.</td>
<td><a href="pdf/262154.pdf">SD DOC Joint Committee on Appropriations 2024</a></td>
</tr>
<tr class="odd">
<td><strong>Recidivism</strong></td>
<td>Decrease the percentage of people on parole who receive a new felony conviction and sentence to the CDOC by 5 percent by June 30, 2027.</td>
<td><a href="pdf/DOC_Performance%20Plan_FY24-25.pdf">Colorado FY24-25 Performance Plan</a></td>
</tr>
<tr class="even">
<td><strong>Operational Efficiency</strong></td>
<td>In FY24, leverage technology to reduce manual data collection burden on staff by 5 percent. Increase time savings by 10 percent by FY25.</td>
<td><a href="pdf/Strategic_plan_FY25-28.pdf">IDOC Strategic Plan 2025-2028</a></td>
</tr>
<tr class="odd">
<td><strong>Security and Safety</strong></td>
<td>Percent of validated safety issues addressed by the Safety Office (defined more specifically in the strategic plan).</td>
<td><a href="pdf/Strategic-Plan-24_v20.pdf">Utah DOC Strategic Plan</a></td>
</tr>
</tbody>
</table>
<hr>
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 84%">
</colgroup>
<thead>
<tr class="header">
<th>Subject Area</th>
<th>KPI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Recidivism</strong></td>
<td>Decrease recidivism of people released between the ages of 18 and 30 by X percent over 4 years.</td>
</tr>
<tr class="even">
<td><strong>Operational Efficiency</strong></td>
<td>Decrease the time taken to repair showers from X days to X days over one year.</td>
</tr>
<tr class="odd">
<td><strong>Recidivism</strong></td>
<td>Increase the time out of cell by X percent for people in minimum or medium security units over one year.</td>
</tr>
<tr class="even">
<td><strong>Security and Safety</strong></td>
<td>Increase the percentage of people receiving visits from family members by X percent over the course of one year.</td>
</tr>
<tr class="odd">
<td><strong>Rehabilitation</strong></td>
<td>Increase access to educational, cognitive, or peer support programming by X percent over one year.</td>
</tr>
</tbody>
</table>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>