<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lesson 3: How to Ask Smart Questions and Interpret Results</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../libs/clipboard/clipboard.min.js"></script>
<script src="../libs/quarto-html/quarto.js" type="module"></script>
<script src="../libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../libs/quarto-html/popper.min.js"></script>
<script src="../libs/quarto-html/tippy.umd.min.js"></script>
<script src="../libs/quarto-html/anchor.min.js"></script>
<link href="../libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../libs/bootstrap/bootstrap.min.js"></script>
<link href="../libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../libs/bootstrap/bootstrap-8de619bbd21ce238746bc3d87e490689.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link rel="preconnect" href="https://fonts.googleapis.com">

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">

<link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,100..900;1,100..900&amp;display=swap" rel="stylesheet">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#step-1-ask-the-right-question" id="toc-step-1-ask-the-right-question" class="nav-link" data-scroll-target="#step-1-ask-the-right-question">Step 1: Ask the right question</a></li>
  <li><a href="#step-2-see-if-you-understand-the-results" id="toc-step-2-see-if-you-understand-the-results" class="nav-link" data-scroll-target="#step-2-see-if-you-understand-the-results">Step 2: See if you understand the results</a></li>
  <li><a href="#step-3-ask-questions-and-avoid-common-mistakes-before-you-act" id="toc-step-3-ask-questions-and-avoid-common-mistakes-before-you-act" class="nav-link" data-scroll-target="#step-3-ask-questions-and-avoid-common-mistakes-before-you-act">Step 3: Ask questions and avoid common mistakes before you act</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lesson 3: How to Ask Smart Questions and Interpret Results</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Good leaders want to lead with data. But one of the key problems they confront is understanding the data their team gives them. As a corrections leader, you may be well-versed in data and analytics because of previous roles or education, because your department has used data effectively, or because you had good mentors. Or you may be incredibly good at the “business” of corrections but have less experience using data.</p>
<p>The truth is that <em>it doesn’t matter how much training you’ve had with data</em>. In some ways, with each new analysis or question, everyone always starts at the beginning because the result of that data analysis will be new information. Leaders who recognize they need to ask questions and dig into analysis results will be best positioned to take relevant, meaningful actions based on the data they receive.</p>
<p>This lesson is designed to give you some tips and tricks for asking your data team the right questions, interpreting what they give you, and making good decisions—or at least the best decision you can make given the information you have.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example
</div>
</div>
<div class="callout-body-container callout-body">
<p>Over the past few years, a volunteer group has held a weekly staff and resident trauma workshop in one of your facilities, Forest Prison. This program has a reputation for improving staff morale, but there was a recent incident where a volunteer was found taking contraband into the facility for resident participants of the program. Investigators think this was going on for a few months. The warden is concerned—is staff morale really better, and what if this program is driving contraband? You brainstorm with your team what overall factors you want to look at: staff morale and incidents in the facility. You already conduct a monthly staff survey at every prison that asks whether staff would recommend working there. This generates a staff recommendation rate, which is the percentage of your staff who answer “yes.” You also have counts on critical incidents. What is your data request?</p>
</div>
</div>
</section>
<section id="step-1-ask-the-right-question" class="level2">
<h2 class="anchored" data-anchor-id="step-1-ask-the-right-question">Step 1: Ask the right question</h2>
<p>A well-crafted research or analysis question is the foundation of effective data-driven decision-making. A good question should be clear, specific, and actionable to guide the data collection and analysis process to produce meaningful insights. By asking more effective questions, you’ll get clearer and quicker responses from your research and analysis team.</p>
<section id="key-characteristics-of-a-strong-data-question" class="level4">
<h4 class="anchored" data-anchor-id="key-characteristics-of-a-strong-data-question">Key characteristics of a strong data question</h4>
<ul>
<li><p>Clarity: Avoid vague or broad questions. Clearly define what you seek to understand.</p></li>
<li><p>Specificity: Focus on a particular issue, facility, or trend within the corrections system. When possible, define what period you need the data to cover.</p></li>
<li><p>Relevance: Ensure the question aligns with your operational goals and system improvement needs.</p></li>
<li><p>Measurability: The question should correspond with identifiable data that your agency collects.</p></li>
<li><p>Comparability: A good question is not “is this a good number?” but “is this a good number compared to what?” Possible comparisons include time (compare a current number to the previous year’s number) or other units (compare the unit at one facility to another unit or facility).</p></li>
<li><p>Rates: To be accurate and meaningful, comparisons typically need to use rates. Knowing the raw number of something is less informative than understanding how that number relates to the whole. For example, knowing that 8 people housed in a unit are gang affiliated is partially helpful. It’s more helpful to know that 2 percent or 75 percent of the people housed in a unit are gang affiliated. Strong data questions ask about “per person” or “per unit.”</p></li>
<li><p>Statistical significance: When a relationship between two variables exists (like program participation and returns to prison), questions should ask analysts to specify whether a difference is statistically significant. Statistical significance means the result you’re seeing is probably real and not just due to random chance.</p></li>
</ul>
<p>Based on these criteria, here’s a good way to formulate a question based on the scenario in the example above:</p>
<p><strong>Can I see the average staff recommendation rate (i.e., the percentage of staff who would recommend working at Forest Prison) and the number of contraband critical incidents at Forest Prison for this year and last year?</strong></p>
<p>This checks a lot of the boxes above—it’s clear, specific, and relevant.</p>
<p>Additionally, when requesting this information from your research and analysis team, it’s helpful to identify whether this is a one-time question based on a specific circumstance—or whether you may need updated analyses regularly—and how quickly you need the answer. If you think you may need updated answers to this question, articulating a cadence will help you get the information more easily next time, as it may impact the analytic infrastructure staff have in place to respond. If they know you’ll need this information regularly, and they have some time to work on the request, they could create an automated report or prioritize it for dashboard development. If you need it tomorrow, they may approach putting together the analysis differently.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example (cont.)
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is what you receive from your data team:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>Last Year</th>
<th>This Year</th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Staff Rec Rate</td>
<td>64%</td>
<td>60%</td>
<td>N/A</td>
</tr>
<tr class="even">
<td>Critical Incidents (Contraband)</td>
<td>234</td>
<td>257</td>
<td>490</td>
</tr>
</tbody>
</table>
<p><br> We think you should send this table back. Why?</p>
<ul>
<li><p>The total for contraband isn’t correct—it’s off by one. Is this because the math is wrong or the analyst rounded?</p></li>
<li><p>The table doesn’t include a title describing what’s in it—specifically what prison it’s about. You could assume that it shows the correct facility, but you want to make sure you’re getting what you asked for!</p></li>
</ul>
</div>
</div>
</section>
</section>
<section id="step-2-see-if-you-understand-the-results" class="level2">
<h2 class="anchored" data-anchor-id="step-2-see-if-you-understand-the-results">Step 2: See if you understand the results</h2>
<p>Once you’ve defined your request for your research and analysis team, you’ll likely receive a response from them that includes tables, charts, or graphs. Understanding the parts of a table or chart helps you check that everything you need is included.</p>
<section id="elements-of-effective-tables" class="level4">
<h4 class="anchored" data-anchor-id="elements-of-effective-tables">Elements of effective tables</h4>
<p>Tables present data in a structured format. Key components of an effective table include the following:</p>
<ul>
<li><strong>Title</strong>: States clearly what data is in the table, over what period</li>
<li><strong>Column Heads</strong>: Describe the data in each column</li>
<li><strong>Row Labels</strong>: Describe the data in each row</li>
<li><strong>Values</strong>: The data points that need to be interpreted</li>
<li><strong>Totals and Averages</strong>: Summary information that comes from the data points</li>
</ul>
<p><em>Remember to check totals and averages! It’s easy for inaccurate information to slip through the cracks.</em></p>
<p>If anything is unclear in the table, it should be clarified with labels, footnotes, or other types of explanations.</p>
</section>
<section id="types-of-charts" class="level4">
<h4 class="anchored" data-anchor-id="types-of-charts">Types of charts</h4>
<p>Different types of charts serve different purposes. Selecting the right chart for the data being presented is crucial for accurate interpretation, and you should check to make sure the chart type aligns with the answer you need for your question. Here are some common chart types and when you should expect to see them:</p>
<ul>
<li><strong>Bar Chart</strong>: Best for comparing different categories or groups (e.g., number of people with different security threat group affiliations in a facility). Bar charts may include stacking or clustering to show more complex data.</li>
<li><strong>Line Chart</strong>: Ideal for showing trends over time (e.g., monthly admissions over the past year)</li>
<li><strong>Pie Chart</strong>: Used for displaying proportions or percentages within a whole at a particular moment in time (e.g., counts of people by security level in a facility)</li>
<li><strong>Heatmap</strong>: Useful for visualizing density across multiple categories (e.g., parole revocations by region and risk level)</li>
<li><strong>Scatterplot</strong>: Useful for looking at a possible relationship between two things (sometimes used with a trendline)</li>
<li><strong>Venn Diagram</strong>: Useful for understanding how groups of items or populations relate to one another and overlap (or don’t)</li>
</ul>
</section>
<section id="elements-of-effective-charts" class="level4">
<h4 class="anchored" data-anchor-id="elements-of-effective-charts">Elements of effective charts</h4>
<p>Every chart contains fundamental elements that help clarify the data:</p>
<ul>
<li><strong>Title</strong>: Provides context for the data being displayed. It should be clear and descriptive and include what period the chart covers.</li>
<li><strong>Axis (X and Y) for line and bar charts</strong>: Defines what the chart measures and the scale
<ul>
<li><strong>X-Axis (Horizontal Axis)</strong>: Typically represents a standard category, such as time, or different groups being compared. For example, in a chart showing prison population trends, the X-axis might represent months or years.</li>
<li><strong>Y-Axis (Vertical Axis)</strong>: Changes based on the X-axis. In the prison population example, the Y-axis would indicate the number of incarcerated individuals. The scale and units should be carefully examined to ensure accurate interpretation.</li>
</ul></li>
<li><strong>Key/Legend</strong>: Explains colors, symbols, or patterns used in the chart</li>
<li><strong>Labels</strong>: Identify data points and make the chart easier to interpret</li>
<li><strong>Trendlines (used most often for line charts)</strong>: Show overall patterns or trajectories in the data, especially over time</li>
<li><strong>Annotation</strong>: Highlights or calls out specific points of importance in a chart</li>
<li><strong>Source</strong>: Important for understanding where the data comes from</li>
<li><strong>Footnotes</strong>: Include extra details about assumptions regarding the data or limitations of the analysis</li>
</ul>
</section>
<section id="common-chart-and-table-pitfalls" class="level4">
<h4 class="anchored" data-anchor-id="common-chart-and-table-pitfalls">Common chart and table pitfalls</h4>
<p>Misleading or poorly designed charts and tables can distort the message of the data. Be aware of these common pitfalls:</p>
<ul>
<li><strong>Using a misleading scale</strong>: Charts that exaggerate differences by altering the scale can misrepresent trends. For example, a chart may use a zoomed-in scale to make it look like there’s a lot of month-to-month variation, whereas with a broader scale, it would look steady.</li>
<li><strong>Not being clear about data type</strong>: Data may be presented without specifying how the element is being measured. For example, is the population displayed an average daily population (ADP) or an end-of-month count?</li>
<li><strong>Using the wrong type of chart, or not the best type of chart, for the question you have</strong>: Different charts are used to answer different types of questions. For example, a pie chart won’t answer questions about trends over time. Sometimes data can be accurately displayed using different chart types, but one type will be clearer to the reader.</li>
<li><strong>Mistaking seasonality for sustained trends</strong>: Corrections data may show seasonal fluctuations that do not indicate long-term change. If you only have one year of data displayed, what might seem like an uptick could be a regular seasonal trend that would be revealed when looking at more years of data.</li>
<li><strong>Ignoring outliers or anomalies</strong>: A single unusual data point may skew perceptions unless it’s investigated further.</li>
</ul>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example (cont.)
</div>
</div>
<div class="callout-body-container callout-body">
<p>You discuss the issue with your executive team and the warden. Someone mentions that she was under the impression that staff morale had been falling this year. Someone else says that a few other wardens have been mentioning upticks in contraband. You ask your data team to look at morale and contraband across the whole system. After all, you need a good comparison. They email you the following graphs.</p>
<p><img src="img/chart1.png" class="img-fluid" style="width:85.0%"></p>
<p>A couple of questions:</p>
<ol type="1">
<li><p>Does this bar chart give you a clear understanding of how the recommendation rate has changed over time?</p></li>
<li><p>Are you able to see trends? There are other ways of organizing this data so you can see what you want to see more clearly.</p></li>
</ol>
<p><img src="img/chart2.png" class="img-fluid" style="width:85.0%"></p>
<p>The above line graph presents the same information that’s in the bar chart, but it displays changes over time better. A trendline and data labels have been added. It looks like morale has been falling in Forest Prison, but it’s been falling across the system, so this is unlikely because of issues with the volunteer program. In addition, it does seem true that employee morale is, in general, better at Forest Prison.</p>
</div>
</div>
</section>
</section>
<section id="step-3-ask-questions-and-avoid-common-mistakes-before-you-act" class="level2">
<h2 class="anchored" data-anchor-id="step-3-ask-questions-and-avoid-common-mistakes-before-you-act">Step 3: Ask questions and avoid common mistakes before you act</h2>
<section id="questions-to-ask-when-reviewing-data" class="level4">
<h4 class="anchored" data-anchor-id="questions-to-ask-when-reviewing-data">Questions to ask when reviewing data</h4>
<p>If a report does not explicitly address certain details, it’s essential to ask clarifying questions:</p>
<ul>
<li><strong>Confirm inclusivity</strong>: Does the data include all relevant populations (e.g., all facilities, all categories of releases)?</li>
<li><strong>Determine the period</strong>: What timeframe does this data cover, and is it relevant for the decision being made?</li>
<li><strong>Check for typos and inconsistencies</strong>: Do the numbers add up correctly?</li>
<li><strong>Investigate anomalies</strong>: If one data point looks significantly different, what happened?</li>
<li><strong>Seek simplicity</strong>: Can the data be presented in a clearer or more useful way? Sometimes a complex table or graph looks appealing but obscures the most relevant information.</li>
</ul>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example (cont.)
</div>
</div>
<div class="callout-body-container callout-body">
<p><img src="img/chart3.png" class="img-fluid" style="width:85.0%"></p>
<p>The data team produces the same type of chart for contraband. Here, it looks like there is a spike in contraband in the system, but not as much at Forest Prison. However, this is a perfect example of data that should be interpreted as rates. The true question is not how much contraband has increased, but how much contraband per person has increased—the rate of contraband. Adjusting for population gives you a much clearer picture:</p>
<p><img src="img/chart4.png" class="img-fluid" style="width:85.0%"></p>
<p>Contraband rates at Forest Prison are lower, but they also largely follow trends in the system. There was a spike in December—both in Forest and in the whole DOC—that is worth investigating. Again, because the spike occurred across the system, it’s unlikely that it has to do with the volunteer program.</p>
</div>
</div>
</section>
<section id="common-data-reading-mistakes" class="level4">
<h4 class="anchored" data-anchor-id="common-data-reading-mistakes">Common data reading mistakes</h4>
<ul>
<li><strong>Misinterpreting relationships</strong>: Assuming a correlation between two variables equals causation, when this might not be the case</li>
<li><strong>Ignoring context</strong>: Analyzing data without considering the broader circumstances or limitations of the data collection process</li>
<li><strong>Cherry-picking</strong>: Selecting only data points that support a desired conclusion while ignoring contradictory evidence</li>
<li><strong>Poor data cleaning</strong>: Inadequately addressing issues like missing values, outliers, or inconsistent formatting before analysis</li>
<li><strong>Bias in sampling</strong>: Drawing conclusions from a sample that is not representative of the overall population</li>
<li><strong>Overlooking outliers</strong>: Failing to identify and properly handle data points that are extremely different from the rest</li>
<li><strong>Not understanding the data source</strong>: Not considering the limitations or potential biases of the data collection method</li>
<li><strong>Jumping to conclusions</strong>: Making hasty interpretations based on limited data analysis without considering alternative explanations</li>
</ul>
</section>
<section id="how-to-avoid-these-mistakes" class="level4">
<h4 class="anchored" data-anchor-id="how-to-avoid-these-mistakes">How to avoid these mistakes</h4>
<ul>
<li><strong>Clearly define the research question</strong>: Ensure you understand the purpose of the analysis and what information you’re trying to extract.</li>
<li><strong>Understand the limitations of the dataset</strong>: Your research team should inform you about gaps in data collection, missing values, or other challenges that may make the data analyses unreliable.</li>
<li><strong>Interpret results with caution</strong>: Avoid making strong claims based on limited data and consider alternative explanations.</li>
<li><strong>Ask questions</strong>: Seek advice from your research director or data analysts when needed to ensure proper interpretation.</li>
</ul>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example (cont.)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Your investigation so far has suggested the following:</p>
<ul>
<li>There is a system-wide uptick in contraband, which is worth investigating.</li>
<li>There is a system-wide decline in morale, which is also worth investigating.</li>
<li>The incident with the volunteer program at Forest Prison does not seem to be the driver of either of these trends, since the program is in just one facility and the trends are system wide.</li>
</ul>
<p>You tell your warden that you see no issues with him continuing the program, especially if new screening protocols are introduced for volunteers.</p>
</div>
</div>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Unfortunately, data doesn’t speak for itself. It requires context, clarity, and careful questioning. By approaching data with curiosity and discipline—asking the right questions, checking for common pitfalls, and working collaboratively with your data team—you’ll be better equipped to separate signal from noise and turn complex information into meaningful action.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>